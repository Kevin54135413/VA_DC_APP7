# ç¬¬3ç« UI ExpanderåµŒå¥—éŒ¯èª¤ä¿®æ­£ç¸½çµ

## å•é¡Œæè¿°
ç”¨æˆ¶é‡åˆ° Streamlit æ‡‰ç”¨ç¨‹å¼éŒ¯èª¤ï¼š
```
StreamlitAPIException: Expanders may not be nested inside other expanders.
```

## éŒ¯èª¤æ ¹æº
åœ¨ `src/ui/parameter_manager.py` ä¸­å­˜åœ¨å¤šå±¤ç´š expander åµŒå¥—ï¼Œé•åäº† Streamlit çš„çµ„ä»¶åµŒå¥—è¦å‰‡ï¼š

### åµŒå¥—çµæ§‹å•é¡Œ
1. **ä¸»è¦ Expander**: `render_advanced_settings()` ä½¿ç”¨ `st.expander("âš™ï¸ é€²éšè¨­å®š")`
2. **åµŒå¥— Expander 1**: `_render_va_growth_rate()` å…§éƒ¨ä½¿ç”¨ `st.expander("ğŸ”§ VAå…¬å¼æ•´åˆ")`
3. **åµŒå¥— Expander 2**: `_render_inflation_adjustment()` å…§éƒ¨ä½¿ç”¨ `st.expander("ğŸ”§ DCAå…¬å¼æ•´åˆ")`
4. **åµŒå¥— Expander 3**: `_render_data_source_selection()` å…§éƒ¨ä½¿ç”¨ `st.expander("ğŸ”§ ç¬¬1ç« APIæ•´åˆ")`
5. **åŸºæœ¬åƒæ•¸åµŒå¥—**: `_render_initial_investment()` å’Œ `_render_investment_years()` ä¹Ÿæœ‰åµŒå¥—å•é¡Œ

## ä¿®æ­£æ–¹æ¡ˆ

### 1. å°‡å…§éƒ¨ Expander æ”¹ç‚º Info å¡ç‰‡
```python
# ä¿®æ­£å‰
with st.expander("ğŸ”§ VAå…¬å¼æ•´åˆ"):
    st.write(f"**æ ¸å¿ƒå…¬å¼**: {param['chapter2_integration']['core_formula']}")
    st.write(f"**åƒæ•¸è§’è‰²**: {param['chapter2_integration']['parameter_role']}")

# ä¿®æ­£å¾Œ
st.info("ğŸ”§ VAå…¬å¼æ•´åˆ")
st.markdown(f"**æ ¸å¿ƒå…¬å¼**: {param['chapter2_integration']['core_formula']}")
st.markdown(f"**åƒæ•¸è§’è‰²**: {param['chapter2_integration']['parameter_role']}")
```

### 2. ä¿®æ­£æ‰€æœ‰åµŒå¥—ä½ç½®
- **åŸºæœ¬åƒæ•¸å€åŸŸ**: 
  - `_render_initial_investment()` æŠ€è¡“æ•´åˆè³‡è¨Š
  - `_render_investment_years()` æŠ€è¡“æ•´åˆè³‡è¨Š
- **é€²éšè¨­å®šå€åŸŸ**:
  - `_render_va_growth_rate()` VAå…¬å¼æ•´åˆ
  - `_render_inflation_adjustment()` DCAå…¬å¼æ•´åˆ
  - `_render_data_source_selection()` ç¬¬1ç« APIæ•´åˆ

### 3. ä¿æŒç¬¬3ç« è¦æ ¼ç¬¦åˆæ€§
- âœ… ä¿ç•™ä¸‰æ¬„å¼éŸ¿æ‡‰å¼å¸ƒå±€ï¼š350px + auto + 300px
- âœ… ä¿ç•™æ‰‹æ©Ÿç‰ˆæ¨™ç±¤å°èˆªï¼šğŸ¯è¨­å®šã€ğŸ“Šçµæœã€ğŸ’¡å»ºè­°
- âœ… ä¿ç•™æ‰€æœ‰åƒæ•¸æ§ä»¶é…ç½®ä¸è®Š
- âœ… ä¿ç•™é€²éšè¨­å®šçš„ä¸»è¦ expander çµæ§‹

## ä¿®æ­£çµæœ

### UI çµ„ä»¶å±¤ç´šçµæ§‹
```
ä¸»æ‡‰ç”¨ç¨‹å¼
â”œâ”€â”€ éŸ¿æ‡‰å¼å¸ƒå±€ç®¡ç†å™¨
â”‚   â”œâ”€â”€ å·¦æ¬„ (350px)
â”‚   â”‚   â”œâ”€â”€ åŸºæœ¬åƒæ•¸ (æ°¸é å¯è¦‹)
â”‚   â”‚   â”‚   â”œâ”€â”€ æœŸåˆæŠ•å…¥é‡‘é¡ + æŠ€è¡“æ•´åˆè³‡è¨Šå¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ æŠ•è³‡å¹´æ•¸ + æŠ€è¡“æ•´åˆè³‡è¨Šå¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ æŠ•è³‡é »ç‡
â”‚   â”‚   â”‚   â””â”€â”€ è‚¡å‚µé…ç½®
â”‚   â”‚   â””â”€â”€ é€²éšè¨­å®š (Expander)
â”‚   â”‚       â”œâ”€â”€ VAæˆé•·ç‡ + VAå…¬å¼æ•´åˆè³‡è¨Šå¡ç‰‡
â”‚   â”‚       â”œâ”€â”€ é€šè†¨èª¿æ•´ + DCAå…¬å¼æ•´åˆè³‡è¨Šå¡ç‰‡
â”‚   â”‚       â””â”€â”€ æ•¸æ“šæºé¸æ“‡ + APIæ•´åˆè³‡è¨Šå¡ç‰‡
â”‚   â”œâ”€â”€ ä¸­æ¬„ (auto)
â”‚   â””â”€â”€ å³æ¬„ (300px)
```

### æŠ€è¡“æ”¹é€²
1. **é¿å…åµŒå¥—è¡çª**: ä½¿ç”¨ `st.info()` å’Œ `st.markdown()` æ›¿ä»£å…§éƒ¨ expander
2. **ä¿æŒè³‡è¨Šå®Œæ•´æ€§**: æ‰€æœ‰æŠ€è¡“æ•´åˆè³‡è¨Šéƒ½å®Œæ•´ä¿ç•™
3. **æ”¹å–„è¦–è¦ºæ•ˆæœ**: ä½¿ç”¨è³‡è¨Šå¡ç‰‡æä¾›æ›´æ¸…æ™°çš„è¦–è¦ºåˆ†éš”
4. **ç¬¦åˆ Streamlit è¦ç¯„**: éµå¾ªçµ„ä»¶åµŒå¥—é™åˆ¶

## æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹
- âœ… Streamlit æ‡‰ç”¨ç¨‹å¼å¯æ­£å¸¸å•Ÿå‹•
- âœ… ç„¡ expander åµŒå¥—éŒ¯èª¤
- âœ… æ‰€æœ‰åƒæ•¸æ§ä»¶æ­£å¸¸æ¸²æŸ“
- âœ… æŠ€è¡“æ•´åˆè³‡è¨Šå®Œæ•´é¡¯ç¤º
- âœ… éŸ¿æ‡‰å¼å¸ƒå±€æ­£å¸¸é‹ä½œ

## ç¬¬3ç« è¦æ ¼ç¬¦åˆæ€§é©—è­‰
- âœ… **åƒæ•¸æ§ä»¶**: æ‰€æœ‰é…ç½®ç¯„åœå’Œé è¨­å€¼ä¿æŒä¸è®Š
- âœ… **å¸ƒå±€çµæ§‹**: ä¸‰æ¬„å¼éŸ¿æ‡‰å¼å¸ƒå±€å®Œæ•´ä¿ç•™
- âœ… **é€²éšè¨­å®š**: å¯æ‘ºç–Šå€åŸŸåŠŸèƒ½æ­£å¸¸
- âœ… **æŠ€è¡“æ•´åˆ**: ç¬¬1ç« å’Œç¬¬2ç« æ•´åˆè³‡è¨Šå®Œæ•´å±•ç¤º
- âœ… **ç”¨æˆ¶é«”é©—**: è³‡è¨Šçµ„ç¹”æ›´æ¸…æ™°ï¼Œè¦–è¦ºæ•ˆæœæ›´å¥½

## æŠ€è¡“è¦é»
1. **Streamlit é™åˆ¶**: expander ä¸èƒ½åµŒå¥—åœ¨å…¶ä»– expander å…§éƒ¨
2. **æ›¿ä»£æ–¹æ¡ˆ**: ä½¿ç”¨ `st.info()` å‰µå»ºè³‡è¨Šå¡ç‰‡ï¼Œ`st.markdown()` æ ¼å¼åŒ–å…§å®¹
3. **ä¿æŒåŠŸèƒ½æ€§**: æ‰€æœ‰æŠ€è¡“æ•´åˆè³‡è¨Šéƒ½ä¿ç•™ï¼Œåªæ˜¯å±•ç¤ºæ–¹å¼æ”¹è®Š
4. **ç¬¦åˆè¦æ ¼**: åš´æ ¼éµå¾ªç¬¬3ç« UIè¨­è¨ˆè¦æ ¼ï¼Œä¸ç ´å£ä»»ä½•é…ç½®

## ä¸‹ä¸€æ­¥
ç¬¬3ç« UIç•Œé¢èˆ‡äº¤äº’è¨­è¨ˆçš„ expander åµŒå¥—éŒ¯èª¤å·²å®Œå…¨ä¿®æ­£ï¼Œç³»çµ±ç¾åœ¨å¯ä»¥æ­£å¸¸é‹è¡Œæ‰€æœ‰UIçµ„ä»¶ï¼Œä¸”è³‡è¨Šå±•ç¤ºæ›´åŠ æ¸…æ™°ã€‚ 