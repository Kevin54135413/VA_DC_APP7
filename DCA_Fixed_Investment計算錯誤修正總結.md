# DCAç­–ç•¥Fixed_Investmentè¨ˆç®—éŒ¯èª¤ä¿®æ­£ç¸½çµ

## ğŸ”§ ä¿®æ­£å…§å®¹

**éŒ¯èª¤é¡å‹ï¼š** DCAç­–ç•¥Fixed_Investmentæ¬„ä½è¨ˆç®—é‚è¼¯éŒ¯èª¤  
**å½±éŸ¿ç« ç¯€ï¼š** ç¬¬2ç« ç­–ç•¥å¼•æ“å’Œç¬¬3ç« 3.3ç¯€çµæœé¡¯ç¤º  
**ä¿®æ­£å‡½æ•¸ï¼š** `src/models/strategy_engine.py` ä¸­çš„ `calculate_dca_strategy` å‡½æ•¸  
**ä¿®æ­£å…§å®¹ï¼š** ä¿®æ­£DCAç­–ç•¥Fixed_Investmentæ¬„ä½è¨ˆç®—é‚è¼¯ï¼Œä½¿å…¶ç¬¦åˆéœ€æ±‚æ–‡ä»¶è¦æ ¼

## ğŸ“‹ å•é¡Œåˆ†æ

### éœ€æ±‚æ–‡ä»¶è¦æ ¼
æ ¹æ“šéœ€æ±‚æ–‡ä»¶ç¬¬2ç« ç¬¬2.1.3ç¯€å’Œç¬¬2.2.2ç¯€ï¼ŒDCAç­–ç•¥çš„Fixed_Investmentæ¬„ä½æ‡‰è©²ï¼š

1. **ç¬¬1æœŸ**ï¼šåªé¡¯ç¤º `calculate_dca_investment(C_period, g_period, 1)`
2. **ç¬¬2æœŸåŠä»¥å¾Œ**ï¼šé¡¯ç¤º `calculate_dca_investment(C_period, g_period, t)`
3. **C0æŠ•å…¥**ï¼šå–®ç¨é¡¯ç¤ºåœ¨ `Initial_Investment` æ¬„ä½

### éŒ¯èª¤å¯¦ç¾
**ä¿®æ­£å‰çš„éŒ¯èª¤é‚è¼¯ï¼š**
```python
if period == 0:
    # ç¬¬ä¸€æœŸï¼šC0 + ç¬¬ä¸€æœŸC_period âŒ éŒ¯èª¤
    period_investment = calculate_dca_investment(C_period, g_period, 1)
    fixed_investment = C0 + period_investment  # éŒ¯èª¤ï¼šåŒ…å«äº†C0
    period_data["Initial_Investment"] = C0
else:
    # å¾ŒçºŒæœŸæ•¸ï¼šèª¿æ•´å¾Œçš„C_period âœ… æ­£ç¢º
    fixed_investment = calculate_dca_investment(C_period, g_period, period + 1)
    period_data["Initial_Investment"] = 0
```

**å•é¡Œèªªæ˜ï¼š**
- Fixed_Investmentæ¬„ä½åœ¨ç¬¬1æœŸéŒ¯èª¤åœ°åŒ…å«äº†C0
- é€™å°è‡´Fixed_Investmentæ¬„ä½é¡¯ç¤ºçš„æ˜¯ç¸½æŠ•å…¥é‡‘é¡ï¼Œè€Œä¸æ˜¯é€šè†¨èª¿æ•´å¾Œçš„å®šæœŸæŠ•å…¥é‡‘é¡
- ä¸ç¬¦åˆéœ€æ±‚æ–‡ä»¶ä¸­æ˜ç¢ºå®šç¾©çš„æ¬„ä½è¦æ ¼

## ğŸ› ï¸ ä¿®æ­£å¯¦æ–½

### ä¿®æ­£å¾Œçš„æ­£ç¢ºé‚è¼¯
```python
if period == 0:
    # ç¬¬ä¸€æœŸï¼šC0å–®ç¨é¡¯ç¤ºåœ¨Initial_Investmentï¼ŒFixed_Investmentåªé¡¯ç¤ºèª¿æ•´å¾Œçš„C_period
    period_investment = calculate_dca_investment(C_period, g_period, 1)
    fixed_investment = period_investment  # ä¿®æ­£ï¼šä¸åŒ…å«C0
    actual_total_investment = C0 + period_investment  # å¯¦éš›ç¸½æŠ•å…¥ç”¨æ–¼ç­–ç•¥åŸ·è¡Œ
    period_data["Initial_Investment"] = C0
else:
    # å¾ŒçºŒæœŸæ•¸ï¼šèª¿æ•´å¾Œçš„C_period - ä½¿ç”¨1-basedæœŸæ•¸
    fixed_investment = calculate_dca_investment(C_period, g_period, period + 1)
    actual_total_investment = fixed_investment  # å¾ŒçºŒæœŸæ•¸æ²’æœ‰C0
    period_data["Initial_Investment"] = 0

period_data["Fixed_Investment"] = fixed_investment
```

### é—œéµä¿®æ­£é»
1. **åˆ†é›¢é¡¯ç¤ºå’Œè¨ˆç®—é‚è¼¯**ï¼š
   - `fixed_investment`ï¼šç”¨æ–¼é¡¯ç¤ºï¼ŒåªåŒ…å«é€šè†¨èª¿æ•´å¾Œçš„å®šæœŸæŠ•å…¥
   - `actual_total_investment`ï¼šç”¨æ–¼ç­–ç•¥åŸ·è¡Œï¼Œç¬¬1æœŸåŒ…å«C0+å®šæœŸæŠ•å…¥

2. **ç­–ç•¥åŸ·è¡Œä¿®æ­£**ï¼š
   ```python
   # ä¿®æ­£å‰
   dca_result = execute_dca_strategy(
       fixed_investment, stock_ratio_decimal, bond_ratio_decimal,
       period_data["SPY_Price_Origin"], period_data["Bond_Price_Origin"]
   )
   
   # ä¿®æ­£å¾Œ
   dca_result = execute_dca_strategy(
       actual_total_investment, stock_ratio_decimal, bond_ratio_decimal,
       period_data["SPY_Price_Origin"], period_data["Bond_Price_Origin"]
   )
   ```

3. **ç´¯ç©æŠ•å…¥ä¿®æ­£**ï¼š
   ```python
   # ä¿®æ­£å‰
   cum_inv += fixed_investment
   
   # ä¿®æ­£å¾Œ
   cum_inv += actual_total_investment
   ```

## âœ… é©—è­‰çµæœ

### æ¸¬è©¦æ¡ˆä¾‹
- **æœŸåˆæŠ•å…¥ (C0)**: $10,000
- **å¹´åº¦æŠ•å…¥**: $12,000
- **å­£åº¦æŠ•å…¥ (C_period)**: $3,000
- **å­£åº¦é€šè†¨ç‡**: 0.50%

### ä¿®æ­£å‰å¾Œå°æ¯”
| æœŸé–“ | ä¿®æ­£å‰Fixed_Investment | ä¿®æ­£å¾ŒFixed_Investment | ä¿®æ­£å¾ŒInitial_Investment |
|------|----------------------|----------------------|-------------------------|
| 1    | $13,000.00 âŒ        | $3,000.00 âœ…         | $10,000.00 âœ…          |
| 2    | $3,014.89 âœ…         | $3,014.89 âœ…         | $0.00 âœ…               |
| 3    | $3,029.85 âœ…         | $3,029.85 âœ…         | $0.00 âœ…               |

### åŠŸèƒ½é©—è­‰
- âœ… **éŒ¯èª¤å·²æ¶ˆé™¤**ï¼šFixed_Investmentæ¬„ä½ä¸å†éŒ¯èª¤åŒ…å«C0
- âœ… **åŠŸèƒ½æ­£å¸¸é‹ä½œ**ï¼šDCAç­–ç•¥è¨ˆç®—é‚è¼¯å®Œå…¨æ­£ç¢º
- âœ… **éœ€æ±‚æ–‡ä»¶åˆè¦**ï¼šå®Œå…¨ç¬¦åˆç¬¬2ç« ç¬¬2.1.3ç¯€å’Œç¬¬2.2.2ç¯€è¦æ ¼
- âœ… **æ•´åˆé—œä¿‚å®Œæ•´**ï¼šèˆ‡å…¶ä»–æ¨¡çµ„çš„æ•´åˆé—œä¿‚ä¿æŒå®Œæ•´

## ğŸ“‹ éœ€æ±‚æ–‡ä»¶éµå¾ªç¢ºèª

- âœ… **å‡½æ•¸ç°½åä¸€è‡´**ï¼š`calculate_dca_strategy` å‡½æ•¸ç°½åä¿æŒä¸è®Š
- âœ… **åƒæ•¸è¦æ ¼ä¸€è‡´**ï¼šæ‰€æœ‰åƒæ•¸è¦æ ¼èˆ‡éœ€æ±‚æ–‡ä»¶ä¸€è‡´
- âœ… **é…ç½®è¨­å®šä¸€è‡´**ï¼šDCAç­–ç•¥é…ç½®è¨­å®šå®Œå…¨ç¬¦åˆè¦æ ¼
- âœ… **æ•´åˆé—œä¿‚ä¸€è‡´**ï¼šèˆ‡VAç­–ç•¥ã€è¡¨æ ¼ç³»çµ±ã€åœ–è¡¨ç³»çµ±çš„æ•´åˆé—œä¿‚ä¿æŒä¸€è‡´

## ğŸ” å½±éŸ¿ç¯„åœ

### ç›´æ¥å½±éŸ¿
1. **DCAç­–ç•¥è¡¨æ ¼é¡¯ç¤º**ï¼šFixed_Investmentæ¬„ä½ç¾åœ¨æ­£ç¢ºé¡¯ç¤ºé€šè†¨èª¿æ•´å¾Œçš„å®šæœŸæŠ•å…¥é‡‘é¡
2. **ä½¿ç”¨è€…é«”é©—**ï¼šä½¿ç”¨è€…å¯ä»¥æ¸…æ¥šå€åˆ†æœŸåˆæŠ•å…¥(C0)å’Œå®šæœŸæŠ•å…¥(Fixed_Investment)
3. **æ•¸æ“šæº–ç¢ºæ€§**ï¼šæ‰€æœ‰DCAç­–ç•¥ç›¸é—œè¨ˆç®—å’Œé¡¯ç¤ºéƒ½å®Œå…¨æº–ç¢º

### é–“æ¥å½±éŸ¿
1. **ç­–ç•¥æ¯”è¼ƒ**ï¼šDCAèˆ‡VAç­–ç•¥æ¯”è¼ƒæ›´åŠ æº–ç¢ºå’Œæ¸…æ™°
2. **å ±å‘Šç”Ÿæˆ**ï¼šæ‰€æœ‰åŒ…å«DCAç­–ç•¥çš„å ±å‘Šéƒ½æ›´åŠ æº–ç¢º
3. **APIéŸ¿æ‡‰**ï¼šç›¸é—œAPIç«¯é»è¿”å›çš„æ•¸æ“šæ›´åŠ ç¬¦åˆè¦æ ¼

## ğŸ“Š æ¸¬è©¦è¦†è“‹

### å–®å…ƒæ¸¬è©¦
- âœ… Fixed_Investmentæ¬„ä½è¨ˆç®—é‚è¼¯æ¸¬è©¦
- âœ… æœŸåˆæŠ•å…¥å’Œå®šæœŸæŠ•å…¥åˆ†é›¢æ¸¬è©¦
- âœ… é€šè†¨èª¿æ•´è¨ˆç®—æº–ç¢ºæ€§æ¸¬è©¦
- âœ… ç´¯ç©æŠ•å…¥è¨ˆç®—æ­£ç¢ºæ€§æ¸¬è©¦

### æ•´åˆæ¸¬è©¦
- âœ… DCAç­–ç•¥å®Œæ•´æµç¨‹æ¸¬è©¦
- âœ… èˆ‡å¸‚å ´æ•¸æ“šæ•´åˆæ¸¬è©¦
- âœ… è¡¨æ ¼æ ¼å¼å’Œæ¬„ä½é †åºæ¸¬è©¦
- âœ… ç­–ç•¥æ¯”è¼ƒåŠŸèƒ½æ¸¬è©¦

## ğŸ¯ ç¸½çµ

æ­¤æ¬¡ä¿®æ­£æˆåŠŸè§£æ±ºäº†DCAç­–ç•¥Fixed_Investmentæ¬„ä½è¨ˆç®—éŒ¯èª¤çš„å•é¡Œï¼Œç¢ºä¿ï¼š

1. **è¦æ ¼åˆè¦**ï¼šå®Œå…¨ç¬¦åˆéœ€æ±‚æ–‡ä»¶ç¬¬2ç« ç¬¬2.1.3ç¯€å’Œç¬¬2.2.2ç¯€çš„è¦æ ¼
2. **é‚è¼¯æ­£ç¢º**ï¼šFixed_Investmentæ¬„ä½åªé¡¯ç¤ºé€šè†¨èª¿æ•´å¾Œçš„å®šæœŸæŠ•å…¥é‡‘é¡
3. **é¡¯ç¤ºæ¸…æ™°**ï¼šC0å’Œå®šæœŸæŠ•å…¥åˆ†åˆ¥é¡¯ç¤ºåœ¨ä¸åŒæ¬„ä½ï¼Œæå‡ä½¿ç”¨è€…é«”é©—
4. **åŠŸèƒ½å®Œæ•´**ï¼šæ‰€æœ‰DCAç­–ç•¥ç›¸é—œåŠŸèƒ½ä¿æŒå®Œæ•´å’Œæº–ç¢º

ä¿®æ­£å¾Œçš„ç³»çµ±æ›´åŠ æº–ç¢ºã€æ¸…æ™°ï¼Œå®Œå…¨ç¬¦åˆéœ€æ±‚æ–‡ä»¶çš„æ‰€æœ‰è¦æ ¼è¦æ±‚ã€‚ 